#!/usr/bin/python

import SimpleHTTPServer
import SocketServer

PORT = 8000

Handler = SimpleHTTPServer.SimpleHTTPRequestHandler


for i in xrange(10):
    try:
        httpd = SocketServer.TCPServer(("", PORT), Handler)
        break
    except:
        PORT += 1

print("serving at port {}".format(PORT))

try:
    httpd.serve_forever()
except KeyboardInterrupt:
    httpd.shutdown()
    httpd.server_close()
    print("User interrupt")
