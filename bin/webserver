#!/usr/bin/python3

import http.server
import socketserver

PORT = 8000

Handler = http.server.SimpleHTTPRequestHandler


for i in range(10):
    try:
        httpd = socketserver.TCPServer(('', PORT), Handler)
        break
    except:
        PORT += 1

print(f'serving at port {PORT}')

try:
    httpd.serve_forever()
except KeyboardInterrupt:
    httpd.shutdown()
    httpd.server_close()
    print('User interrupt')
